<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Sadece Biz • Kontrol Paneli</title>
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
<style>
:root{
  --bg1:#fde7f2; --bg2:#f7d4ff; --panel:#ffffff; --ink:#2a2e39; --sub:#5b6070;
  --vio:#6d28d9; --vio2:#7c3aed; --mut:#eef1f6; --ok:#0ea5e9; --warn:#ef4444;
  --ring: rgba(109,40,217,.25);
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  color:var(--ink);
  background:linear-gradient(135deg,var(--bg1),var(--bg2)) fixed;
}
header{
  position:sticky; top:0; z-index:10;
  background:linear-gradient(90deg,#6d28d9,#9333ea);
  color:#fff; padding:14px 16px; box-shadow:0 8px 28px rgba(109,40,217,.25);
}
h1{margin:0;font-size:20px;display:flex;align-items:center;gap:10px}
.wrap{max-width:920px;margin:18px auto;padding:0 14px}
.nav{
  display:flex; gap:12px; flex-wrap:wrap; margin:14px 0 10px;
}
.tab-btn{
  appearance:none; border:0; background:#fff; color:var(--ink);
  padding:10px 14px; border-radius:14px; font-weight:600;
  box-shadow:0 8px 24px rgba(0,0,0,.08); display:flex; align-items:center; gap:8px;
}
.badge{font-size:12px;color:var(--sub)}
.panel{
  background:var(--panel); border-radius:18px; padding:18px;
  box-shadow:0 18px 48px rgba(0,0,0,.10)
}
.panel h2{margin:0 0 10px}
.controls{display:flex;gap:10px;flex-wrap:wrap;margin:10px 0 14px}
.btn{
  background:var(--vio); color:#fff; border:0; padding:10px 14px; border-radius:12px;
  font-weight:600; box-shadow:0 10px 24px var(--ring); cursor:pointer
}
.ghost{background:#f3f4f6; color:var(--ink)}
.danger{background:var(--warn); box-shadow:none}
.hidden{display:none}
.note{color:var(--sub); font-size:12px}
.grid{display:grid;gap:10px}
.gallery{grid-template-columns:repeat(auto-fill,minmax(120px,1fr))}
.card{
  background:#fff; border:1px solid #eef1f6; border-radius:12px; overflow:hidden;
  box-shadow:0 8px 18px rgba(0,0,0,.06)
}
.card img{display:block;width:100%;height:120px;object-fit:cover}
.card .card-bar{display:flex;justify-content:space-between;align-items:center;padding:6px 8px}
.input, textarea{
  width:100%; padding:12px 14px; border-radius:12px; border:1px solid #e5e7eb;
  outline:none; background:#fff;
}
.input:focus, textarea:focus{box-shadow:0 0 0 4px var(--ring); border-color:#c7b5ff}
.row{display:flex; gap:10px; flex-wrap:wrap}
.col{flex:1 1 240px}
.kv{display:grid; grid-template-columns:1fr auto; gap:8px; align-items:center}
.tags{display:flex; gap:6px; flex-wrap:wrap}
.tag{background:#f1f5f9; color:#334155; font-size:12px; padding:4px 8px; border-radius:999px}
.footer{margin-top:20px; text-align:center; color:var(--sub)}
hr{border:0; height:1px; background:#eef1f6; margin:12px 0}
.small{font-size:12px; color:var(--sub)}
</style>
</head>
<body>
<header>
  <h1>🌸 Sadece Biz • Kontrol Paneli <span class="badge">veriler bu cihazda saklanır (localStorage)</span></h1>
</header>

<div class="wrap">
  <!-- ÜST MENÜ -->
  <div class="nav">
    <button class="tab-btn" data-tab="photos">🖼️ Resimler</button>
    <button class="tab-btn" data-tab="notes">🗒️ Not Defteri</button>
    <button class="tab-btn" data-tab="calendar">📅 Takvim</button>
  </div>

  <!-- TOPLU YEDEK/GERİ YÜKLE -->
  <div class="controls">
    <button class="ghost btn" id="expAll">⬇️ Tümünü Dışa Aktar (JSON)</button>
    <label class="ghost btn">⬆️ Tümünü İçe Aktar
      <input id="impAll" type="file" accept="application/json" class="hidden">
    </label>
    <small class="note">Yeni cihaza geçince bu dosyayı yükle → her şey geri gelsin 💾</small>
  </div>

  <!-- RESİMLER -->
  <section id="tab-photos" class="panel">
    <h2>🖼️ Resimler</h2>
    <div class="controls">
      <label class="btn">➕ Resim Ekle
        <input id="addPhoto" type="file" accept="image/*" multiple class="hidden">
      </label>
      <button class="ghost btn" id="expPhotos">⬇️ Dışa aktar (JSON)</button>
      <label class="ghost btn">⬆️ İçe aktar
        <input id="impPhotos" type="file" accept="application/json" class="hidden">
      </label>
      <button class="danger btn" id="clearPhotos">🗑️ Hepsini Sil</button>
    </div>
    <p class="small">Seçtiğin resimler galerine eklenir ve **yalnızca bu tarayıcıda** saklanır.</p>
    <div id="gallery" class="grid gallery"></div>
  </section>

  <!-- NOTLAR -->
  <section id="tab-notes" class="panel" style="display:none">
    <h2>🗒️ Not Defteri</h2>
    <div class="row">
      <div class="col">
        <input id="noteTitle" class="input" placeholder="Başlık…">
      </div>
      <div class="col">
        <button class="btn" id="addNote">➕ Not Ekle</button>
        <button class="ghost btn" id="expNotes">⬇️ Dışa aktar</button>
        <label class="ghost btn">⬆️ İçe aktar
          <input id="impNotes" type="file" accept="application/json" class="hidden">
        </label>
        <button class="danger btn" id="clearNotes">🗑️ Hepsini Sil</button>
      </div>
    </div>
    <textarea id="noteBody" rows="5" class="input" placeholder="Not içeriği…"></textarea>
    <hr>
    <div id="notesList" class="grid"></div>
  </section>

  <!-- TAKVİM -->
  <section id="tab-calendar" class="panel" style="display:none">
    <h2>📅 Takvim</h2>
    <div class="row">
      <div class="col"><input id="evTitle" class="input" placeholder="Etkinlik başlığı"></div>
      <div class="col"><input id="evDate"  class="input" type="date"></div>
      <div class="col"><button class="btn" id="addEvent">➕ Ekle</button></div>
    </div>
    <hr>
    <div id="events" class="grid"></div>
  </section>

  <p class="footer">© 2025 Sadece Biz – Zeliha 💖</p>
</div>

<script>
/* ==== VERİ ANAHTARLARI ==== */
const K = {
  photos: 'sb.photos.v1',
  notes:  'sb.notes.v1',
  events: 'sb.events.v1'
};
/* ==== ARAÇLAR ==== */
const $ = s => document.querySelector(s);
const el = (t,attrs={}) => Object.assign(document.createElement(t), attrs);
const save = (k,v)=>localStorage.setItem(k,JSON.stringify(v));
const load = (k)=>{try{return JSON.parse(localStorage.getItem(k))||[]}catch(_){return []}};
const downloadJSON=(name,obj)=>{
  const a=el('a',{href:URL.createObjectURL(new Blob([JSON.stringify(obj,null,2)],{type:'application/json'})),download:name});
  document.body.append(a); a.click(); a.remove();
};
const readJSON=(file)=>new Promise((res,rej)=>{const r=new FileReader(); r.onload=()=>{try{res(JSON.parse(r.result))}catch(e){rej(e)}}; r.onerror=rej; r.readAsText(file)});

/* ==== SEKME GEÇİŞLERİ ==== */
document.querySelectorAll('.tab-btn').forEach(b=>{
  b.addEventListener('click',()=>{
    document.querySelectorAll('section[id^="tab-"]').forEach(s=>s.style.display='none');
    $('#tab-'+b.dataset.tab).style.display='';
  });
});

/* ==== RESİMLER ==== */
const gallery = $('#gallery');
function renderGallery(){
  const list = load(K.photos);
  gallery.innerHTML='';
  if(!list.length){ gallery.innerHTML='<p class="small">Henüz resim yok.</p>'; return }
  list.forEach((p,i)=>{
    const card=el('div',{className:'card'});
    const img=el('img',{src:p.data,alt:p.name||'resim'});
    const bar=el('div',{className:'card-bar'});
    const cap=el('span'); cap.textContent=p.name||'resim';
    const del=el('button',{className:'ghost btn',textContent:'Sil'});
    del.addEventListener('click',()=>{
      const arr=load(K.photos); arr.splice(i,1); save(K.photos,arr); renderGallery();
    });
    bar.append(cap,del); card.append(img,bar); gallery.append(card);
  });
}
$('#addPhoto').addEventListener('change', async (e)=>{
  const files=[...e.target.files];
  if(!files.length) return;
  const cur=load(K.photos);
  for (const f of files){
    const data = await fileToDataURL(f);
    cur.unshift({name:f.name, data});
  }
  save(K.photos,cur); e.target.value=''; renderGallery();
});
function fileToDataURL(file){
  return new Promise((res,rej)=>{const r=new FileReader(); r.onload=()=>res(r.result); r.onerror=rej; r.readAsDataURL(file)});
}
$('#expPhotos').addEventListener('click',()=>downloadJSON('resimler.json',load(K.photos)));
$('#impPhotos').addEventListener('change',async e=>{
  const f=e.target.files[0]; if(!f) return;
  const data=await readJSON(f);
  save(K.photos,[...data,...load(K.photos)]);
  renderGallery(); e.target.value='';
});
$('#clearPhotos').addEventListener('click',()=>{
  if(confirm('Tüm resimler silinsin mi?')){ save(K.photos,[]); renderGallery(); }
});

/* ==== NOTLAR ==== */
const notesList = $('#notesList');
function renderNotes(){
  const list = load(K.notes);
  notesList.innerHTML='';
  if(!list.length){ notesList.innerHTML='<p class="small">Henüz not yok.</p>'; return }
  list.forEach((n,i)=>{
    const card=el('div',{className:'card',style:'padding:10px'});
    const top=el('div',{className:'kv'});
    const t=el('strong'); t.textContent=n.title||'Başlıksız';
    const del=el('button',{className:'ghost btn',textContent:'Sil'});
    del.addEventListener('click',()=>{const a=load(K.notes); a.splice(i,1); save(K.notes,a); renderNotes()});
    const body=el('p'); body.textContent=n.body||'';
    const small=el('div',{className:'small'}); small.textContent=new Date(n.ts).toLocaleString();
    top.append(t,del); card.append(top,body,small); notesList.append(card);
  });
}
$('#addNote').addEventListener('click',()=>{
  const title=$('#noteTitle').value.trim();
  const body=$('#noteBody').value.trim();
  if(!title && !body){ alert('Boş not eklenemez'); return; }
  const cur=load(K.notes);
  cur.unshift({title,body,ts:Date.now()});
  save(K.notes,cur);
  $('#noteTitle').value=''; $('#noteBody').value='';
  renderNotes();
});
$('#expNotes').addEventListener('click',()=>downloadJSON('notlar.json',load(K.notes)));
$('#impNotes').addEventListener('change',async e=>{
  const f=e.target.files[0]; if(!f) return;
  const data=await readJSON(f); save(K.notes,[...data,...load(K.notes)]);
  renderNotes(); e.target.value='';
});
$('#clearNotes').addEventListener('click',()=>{
  if(confirm('Tüm notlar silinsin mi?')){ save(K.notes,[]); renderNotes(); }
});

/* ==== TAKVİM ==== */
const evBox = $('#events');
function renderEvents(){
  const list=load(K.events).sort((a,b)=>a.date.localeCompare(b.date));
  evBox.innerHTML='';
  if(!list.length){ evBox.innerHTML='<p class="small">Henüz etkinlik yok.</p>'; return }
  list.forEach((ev,i)=>{
    const card=el('div',{className:'card',style:'padding:10px'});
    const top=el('div',{className:'kv'});
    const t=el('strong'); t.textContent=ev.title;
    const del=el('button',{className:'ghost btn',textContent:'Sil'});
    del.addEventListener('click',()=>{const a=load(K.events); a.splice(i,1); save(K.events,a); renderEvents()});
    const when=el('div',{className:'small'}); when.textContent=new Date(ev.date).toLocaleDateString();
    top.append(t,del); card.append(top,when); evBox.append(card);
  });
}
$('#addEvent').addEventListener('click',()=>{
  const title=$('#evTitle').value.trim();
  const date=$('#evDate').value;
  if(!title||!date){ alert('Başlık ve tarih gerekli'); return; }
  const cur=load(K.events); cur.push({title,date}); save(K.events,cur);
  $('#evTitle').value=''; $('#evDate').value=''; renderEvents();
});

/* ==== TOPLU YEDEK / GERİ YÜKLE ==== */
$('#expAll').addEventListener('click',()=>{
  const all={photos:load(K.photos), notes:load(K.notes), events:load(K.events)};
  downloadJSON(`sadecebiz_yedek_${new Date().toISOString().slice(0,10)}.json`, all);
});
$('#impAll').addEventListener('change', async e=>{
  const f=e.target.files[0]; if(!f) return;
  try{
    const d=await readJSON(f);
    if(d.photos) save(K.photos, [...d.photos, ...load(K.photos)]);
    if(d.notes)  save(K.notes,  [...d.notes,  ...load(K.notes)]);
    if(d.events) save(K.events, [...d.events, ...load(K.events)]);
    renderGallery(); renderNotes(); renderEvents();
    alert('Yedek içe aktarıldı 💾');
  }catch(err){ alert('İçe aktarma başarısız ❌'); }
  e.target.value='';
});

/* ==== İLK RENDER ==== */
renderGallery(); renderNotes(); renderEvents();
</script>
</body>
</html>
